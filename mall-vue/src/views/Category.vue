<template>
  <div class="category"> 
   <mt-header fixed title="å•†å“åˆ†ç±»" class="shangpinfenlei"></mt-header>
   <!--æœç´¢æ¡†-->
    <Search ph="ğŸ” è¯·è¾“å…¥æƒ³æœçš„å•†å“ç±»åˆ«"/>
    <!--åˆ†ç±»åˆ—è¡¨-->
    <CategoryList :categories='categories' @category-Click="viewGoodsByCategory"/>
  </div>
</template>

<script>
    import Vue from 'vue';
    import CategoryList from '../components/CategoryList'
    import Search from '../components/Search'
    import { Header} from 'mint-ui';
    import 'mint-ui/lib/style.css'

    const axios = require ('axios');

    Vue.component(Header.name, Header);

  export default {
    components:{
      CategoryList,Search
    },
   
   data() {
     return{
      categories:[]
     }
   },
   methods:{
      getCategoryList(){
         console.log("å¼€å§‹è¯·æ±‚åˆ†ç±»æ•°æ®....")
         //è¯·æ±‚
            axios.get('http://localhost:3000/categoryAll') 
                .then((response)=>{
                  //å½“è¯·æ±‚æˆåŠŸæ‰ä¼šè§¦å‘
                  console.log(response);
                  this.categories = response.data
                })
                .catch((error)=>{
                  //å½“è¯·æ±‚å‘ç”Ÿé”™è¯¯ï¼Œå°±è§¦å‘catchï¼Œæ‰“å°å‡ºerror
                  console.log(error);
                })
                .then(()=>{
                //è¿™ä»£ç æ®µä¸ç®¡è¯·æ±‚æ˜¯å¦æˆåŠŸéƒ½ä¼šè¢«æ‰§è¡Œ
                });
              },
    viewGoodsByCategory(){
      console.log("viewGoodsByCategorysssssssss.")
      this.$router.push('goodsList');//åˆ‡æ¢åˆ°å•†å“åˆ—è¡¨é¡µ
      }
   },
     //å…ƒç´ æŒ‚è½½å®Œæ¯•åè§¦å‘
     mounted(){
       console.log('mounted')
       this.getCategoryList()
     },
 }
</script>

<style scoped>
.shangpinfenlei{
  background-color: #FFD2D2;
}
.category{
  padding-top: 20px;
}
</style>>

